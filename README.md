# RSA and AES CBC encryption as per OpenSSL

The code in the `crypto` folder does encryption same as the OpenSSL commands:

```
WORKLOAD="<PATH to workload.yaml>"
CONTRACT_KEY="<PATH to certificate.crt>"
PASSWORD="$(openssl rand 32 | base64 -w0)"
ENCRYPTED_PASSWORD="$(echo -n "$PASSWORD" | base64 -d | openssl rsautl -encrypt -inkey $CONTRACT_KEY -certin | base64 -w0 )"
ENCRYPTED_WORKLOAD="$(echo -n "$PASSWORD" | base64 -d | openssl enc -aes-256-cbc -pbkdf2 -pass stdin -in "$WORKLOAD" | base64 -w0)"
```

See the tests in `crypto/crypto_test.go` where we compare against the output generated by OpenSSL 3.0.5 5 Jul 2022 (Library: OpenSSL 3.0.5 5 Jul 2022)
